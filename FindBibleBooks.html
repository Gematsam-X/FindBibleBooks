<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="description"
      content="Trova libri della Bibbia in modo veloce e semplice"
    />
    <meta name="keywords" content="scritture, libri, Bibbia, semplificato" />
    <title>FindBibleBooks</title>
    <style>
      /* Global */
      html {
        font-weight: bold;
        font-size: larger;
        color: tomato;
        background-color: aquamarine;
      }

      /* ID */
      #footer {
        position: fixed;
        bottom: 0;
        right: 0;
        padding: 20px;
        text-align: right;
        font-size: 1.3rem;
      }

      #output {
        text-align: center;
        font-size: 2rem;
      }

      #input {
        font-size: 2.5rem;
        text-align: center;
        width: 80%;
        padding: 10px;
        margin-bottom: 20px;
      }

      #title-h1 {
        font-size: 3rem;
        text-align: center;
      }

      #searchButton {
        display: block;
        margin: 0 auto;
        padding: 10px 20px;
        font-size: 3rem;
        background-color: tomato;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      #searchButton:hover {
        background-color: darkred;
      }

      /* Classes */
      .container {
        text-align: center;
        margin-top: 50px;
      }
    </style>
  </head>
  <body>
    <h1 id="title-h1">Digita il libro biblico qui sotto!</h1>
    <div class="container">
      <input
        autocomplete="off"
        type="text"
        placeholder="Scrivi qui il libro biblico..."
        id="input"
      />
      <button id="searchButton">Cerca</button>
    </div>
    <p id="output">
      Digita qui sopra il libro biblico per trovarlo più velocemente! Riceverai
      un link per il reindirizzamento.
    </p>
    <footer id="footer">
      <h5>
        Bibbia offerta da <a href="https://jw.org/it/">Jw.org</a>. Visita ora il
        sito internet!
      </h5>
    </footer>
    <script>
      const bibleBooks = [
  "Genesi",
  "Esodo",
  "Levitico",
  "Numeri",
  "Deuteronomio",
  "Giosuè",
  "Giudici",
  "Rut",
  "1 Samuele",
  "2 Samuele",
  "1 Re",
  "2 Re",
  "1 Cronache",
  "2 Cronache",
  "Esdra",
  "Neemia",
  "Ester",
  "Giobbe",
  "Salmi",
  "Proverbi",
  "Ecclesiaste",
  "Cantico dei Cantici",
  "Isaia",
  "Geremia",
  "Lamentazioni",
  "Ezechiele",
  "Daniele",
  "Osea",
  "Gioele",
  "Amos",
  "Abdia",
  "Giona",
  "Michea",
  "Naum",
  "Abacuc",
  "Sofonia",
  "Aggeo",
  "Zaccaria",
  "Malachia",
  "Matteo",
  "Marco",
  "Luca",
  "Giovanni",
  "Atti",
  "Romani",
  "1 Corinti",
  "2 Corinti",
  "Galati",
  "Efesini",
  "Filippesi",
  "Colossesi",
  "1 Tessalonicesi",
  "2 Tessalonicesi",
  "1 Timoteo",
  "2 Timoteo",
  "Tito",
  "Filemone",
  "Ebrei",
  "Giacomo",
  "1 Pietro",
  "2 Pietro",
  "1 Giovanni",
  "2 Giovanni",
  "3 Giovanni",
  "Giuda",
  "Rivelazione",
];
const outputParagraph = document.getElementById("output");
function injectOutput(inject) {
  outputParagraph.innerText = inject;
}

function checkBibleBook() {
  const originalInput = document.getElementById("input").value;
  const sanitizedInput = originalInput
    .toLowerCase()
    .replace(/\s+/g, "")
    .trim();

  // Trova tutti i libri che iniziano con la stringa inserita
  const matches = bibleBooks.filter((book) =>
    book.toLowerCase().replace(/\s+/g, "").startsWith(sanitizedInput)
  );

  if (matches.length === 1 || sanitizedInput === "salmo") {
    if (sanitizedInput === "salmo") {
      window.location.href = "https://www.jw.org/finder?wtlocale=I&prefer=lang&book=19&pub=nwtsty"
      return;
    }
      
    // Un solo libro trovato: reindirizza
    const bookIndex = bibleBooks.indexOf(matches[0]);
    const bookNumber = bookIndex + 1; // Trasforma l'indice in numero (partendo da 1)
    window.location.href = `https://www.jw.org/finder?wtlocale=I&prefer=lang&book=${bookNumber}&pub=nwtsty`
  } else if (matches.length > 1) {
    // Più libri trovati: mostra suggerimenti
    injectOutput(`Il testo che hai fornito non è sufficiente a determinare che libro della Bibbia stavi cercando. Forse ti riferivi a:\n${matches.join(" - ")}`);
  } else {
    // Nessun libro trovato
    injectOutput("Libro non trovato. Assicurati di aver digitato il libro o le sue iniziali correttamente.")
  }
}

// Event listener per il bottone "Cerca"
const searchButton = document.getElementById("searchButton");
searchButton.addEventListener("click", checkBibleBook);

// Permette la ricerca premendo "Invio"
document.addEventListener("keypress", (event) => {
  if (event.key === "Enter") {
    checkBibleBook();
  }
});
    </script>
  </body>
  <!--Bibbia offerta da https://www.jw.org/it/ , visitate ora il sito-->
</html>
